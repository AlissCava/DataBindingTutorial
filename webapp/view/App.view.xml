<mvc:View
	controllerName="ui5.databinding.controller.App"
	xmlns="sap.m"
	xmlns:core="sap.ui.core"
	xmlns:form="sap.ui.layout.form"
	xmlns:l="sap.ui.layout"
	xmlns:mvc="sap.ui.core.mvc"
	core:require="{Currency: 'sap/ui/model/type/Currency'}">
	<Panel headerText="{i18n>panel3HeaderText}" class="sapUiResponsiveMargin" width="auto">
		<List headerText="{i18n>productListTitle}" items="{products>/Products}">
			<items>
				<ObjectListItem 
          press=".onItemSelected"
					type="Active"
          title="{products>ProductName}"
					number="{
						parts: [
							{path: 'products>UnitPrice'},
							{path: '/currencyCode'}
						],
						type: 'Currency',
						formatOptions: { showMeasure: false }
					}"
					numberUnit="{/currencyCode}"
          numberState="{= ${products>UnitPrice} > ${/priceThreshold} ? 'Error' : 'Success' }">
					<!--Logica dinamica: Viene aggiunto un valore di soglia (20€) nel file dei dati. Nella vista, il colore del prezzo (proprietà numberState) viene deciso da una formula "al volo": se il prezzo supera la soglia diventa rosso (Error), altrimenti diventa verde (Success).
          Attenzione ai caratteri speciali: Il tutorial evidenzia un problema comune. Usando il simbolo "minore di" (<) il codice si rompe, perché il sistema lo scambia per l'apertura di un nuovo tag XML.
          La soluzione: Per evitare errori, è meglio invertire la logica usando il "maggiore di" (>) oppure utilizzare i codici speciali (come &lt;). Gli sviluppatori consigliano la prima opzione perché rende il codice molto più leggibile.
          
          Il risultato è una lista intelligente che aiuta l'utente a identificare a colpo d'occhio i prodotti più costosi.-->

          
          <attributes>
						<ObjectAttribute text="{products>QuantityPerUnit}"/>
						<ObjectAttribute title="{i18n>stockValue}"
							text="{
								parts: [
									{path: 'products>UnitPrice'},
									{path: 'products>UnitsInStock'},
									{path: '/currencyCode'}
								],
								formatter: '.formatStockValue'
							}"/>
					</attributes>
				</ObjectListItem>
			</items>
		</List>
	</Panel>
  <Panel id="productDetailsPanel" headerText="{i18n>panel4HeaderText}" class="sapUiResponsiveMargin" width="auto">
		<form:SimpleForm editable="true" layout="ColumnLayout">
			<Label text="{i18n>ProductID}"/>
			<Input value="{products>ProductID}"/>

			<Label text="{i18n>ProductName}"/>
			<Input value="{products>ProductName}"/>

			<Label text="{i18n>QuantityPerUnit}"/>
			<Input value="{products>QuantityPerUnit}"/>

			<Label text="{i18n>UnitPrice}"/>
			<Input value="{products>UnitPrice}"/>

			<Label text="{i18n>UnitsInStock}"/>
			<Input value="{products>UnitsInStock}"/>

			<Label text="{i18n>Discontinued}"/>
			<CheckBox selected="{products>Discontinued}"/>
		</form:SimpleForm>
	</Panel>
</mvc:View>